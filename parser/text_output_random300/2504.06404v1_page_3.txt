IV. OPTIMIZATION FOR PARAMETER DETERMINATION 
To determine the parameter vector ğ‘¤ for a given set of 
measurements the problem is formulated as a quadratic 
optimization problem (further details see [4]). The following 
equations  
ğ‘(ğ‘¤) = & ğ‘#(ğ‘¤) 
 
ğ‘: ğ‘œğ‘£ğ‘’ğ‘Ÿ ğ‘ğ‘™ğ‘™ ğ‘ğ‘œğ‘ ğ‘¡ ğ‘“ğ‘¢ğ‘›ğ‘ğ‘¡ğ‘–ğ‘œğ‘› 
ğ‘#: ğ‘ ğ‘¢ğ‘ğ‘ğ‘œğ‘ ğ‘¡ ğ‘¡â„ğ‘ğ‘¡ ğ‘¤ğ‘ğ‘  ğ‘ğ‘‘ğ‘‘ğ‘’ğ‘‘  
ğ‘¡ğ‘œ ğ‘¡â„ğ‘’ ğ‘œğ‘£ğ‘’ğ‘Ÿğ‘ğ‘™ğ‘™ ğ‘ğ‘œğ‘ ğ‘¡ 
ğ‘¤: ğ‘ğ‘ğ‘Ÿğ‘ğ‘šğ‘’ğ‘¡ğ‘’ğ‘Ÿ ğ‘£ğ‘’ğ‘ğ‘¡ğ‘œğ‘Ÿ 
(6) 
âˆ‡ğ‘(ğ‘¤) = & âˆ‡ğ‘#(ğ‘¤) = 0 
 
 
show the structure of the cost function and the gradient that 
needs to be set to zero in order to solve it. 
Since the optimization problem to determine w is assumed 
to be quadratic the gradient of q(w) can be written as Matrix 
times weight vector plus a vector 
âˆ‡ğ‘(ğ‘¤) = & ğ‘„# â‹…ğ‘¤âˆ’ğ‘# = 0 
ğ‘: overall cost function 
ğ‘„#: Matrix of the cost fcn j 
ğ‘#: vector of the cost fcn j 
ğ‘¤: parameter vector 
(7) 
& ğ‘„#
_`a
)
â‹…ğ‘¤= & ğ‘#
_`a
*
. 
 
Based on this structure different matrices ğ‘„j and vectors ğ‘j  
are determined and added to the overall matrix ğ‘„ and vector ğ‘. 
Not all of the following elements that contribute to Q and b are 
needed at the same time. The idea is that we can add multiple of 
them to the optimization problem and they contribute via their 
corresponding Matrix Qj and vector bj . 
The next steps are to derive the following costs and add them 
to the optimization. Specifically, the cost is decomposed as 
 
ğ‘(ğ‘¤)
= ğ‘123,),24(ğ‘¤)
+ ğ‘56728,)9(ğ‘¤)
+ ğ‘:6;-,4*(ğ‘¤)
+ ğ‘7;)6+;7,123,),24(ğ‘¤)
+ ğ‘724*,)<-,4;7,123,),24(ğ‘¤)
+ ğ‘;1+,2+,,+6*<7;+,3;),24(ğ‘¤). 
 
(8) 
A. L2 Norm to fit positions, velocities and accelerations  
In order to consider position, velocities and acceleration 
measurements, we add up the squared differences between 
measurement values and the predicted values of the model. 
Each measurement can be weighted individually by a factor ğ‘ğ‘–  
ğ‘&'((ğ‘¤) = 1
2 = ğ‘) â‹…(ğ‘“(ğ‘¡)) âˆ’ğ‘“))%
*
)
= 1
2 = ğ‘) ?@= ğ‘“!(ğ‘¡)) â‹…ğ‘¤!
+
!
A âˆ’ğ‘“)B
%
*
)
 
= 1
2 = ğ‘) @(ğ‘“,(ğ‘¡))
â€¦
ğ‘“+(ğ‘¡))) â‹…D
ğ‘¤,
â‹®
ğ‘¤+
F âˆ’ğ‘“)A
%
*
)
 
âˆ‡ğ‘&'((ğ‘¤) = = ğ‘) @(ğ‘“,(ğ‘¡))
â€¦
ğ‘“+(ğ‘¡))) â‹…D
ğ‘¤,
â‹®
ğ‘¤+
F âˆ’ğ‘“)A â‹…D
ğ‘“,(ğ‘¡))
â‹®
ğ‘“+(ğ‘¡))
F
*
)
 
= = ğ‘) D
ğ‘“,(ğ‘¡))
â‹®
ğ‘“+(ğ‘¡))
F (ğ‘“,(ğ‘¡))
â€¦
ğ‘“+(ğ‘¡)))
*
)HIIIIIIIIIIJIIIIIIIIIIK
-!"#
â‹…D
ğ‘¤,
â‹®
ğ‘¤+
F âˆ’= ğ‘) â‹…ğ‘“) D
ğ‘“,(ğ‘¡))
â‹®
ğ‘“+(ğ‘¡))
F
*
)HIIIIIJIIIIIK
.!"#
. 
 
(9) 
With the same approach the matrices and vectors for 
velocities and acceleration follow to 
= ğ‘) @
ğ‘“Ì‡,(ğ‘¡))
â‹®
ğ‘“Ì‡+(ğ‘¡))
A (ğ‘“Ì‡,(ğ‘¡))
â€¦
ğ‘“Ì‡+(ğ‘¡)))
*
)HIIIIIIIIIIJIIIIIIIIIIK
-$%&
â‹…D
ğ‘¤,
â‹®
ğ‘¤+
F âˆ’= ğ‘) â‹…ğ‘“Ì‡) @
ğ‘“Ì‡,(ğ‘¡))
â‹®
ğ‘“Ì‡+(ğ‘¡))
A
*
)HIIIIIJIIIIIK
.$%&
. 
(10) 
And for the acceleration to  
= ğ‘) @
ğ‘“Ìˆ,(ğ‘¡))
â‹®
ğ‘“Ìˆ+(ğ‘¡))
A (ğ‘“Ìˆ,(ğ‘¡))
â€¦
ğ‘“Ìˆ+(ğ‘¡)))
*
)HIIIIIIIIIIJIIIIIIIIIIK
-'((
â‹…D
ğ‘¤,
â‹®
ğ‘¤+
F âˆ’= ğ‘) â‹…ğ‘“Ì‡) @
ğ‘“Ìˆ,(ğ‘¡))
â‹®
ğ‘“Ìˆ+(ğ‘¡))
A .
*
)HIIIIIJIIIIIK
.'((
 
(11) 
In the following the weight of an individual Point will not be 
written for each equation. 
B. Splitting into longitudinal and lateral error 
Often the required longitudinal and lateral accuracy is 
different. Typically, the lateral accuracy must be higher, because 
that decides if an object is on the lane or not. Also, the 
measurement quality can be better for lateral positions, because 
the lane is known and printed on the road and can be used as 
reference for lateral positions. 
Thus, we want to have the option to weigh lateral and 
longitudinal errors individually. To keep the structure of the 
optimization problem the same we use a known heading at each 
measurement point and rotate into the object coordinate system. 
The resulting error functions are  
 
 
!ğ‘¥#
ğ‘¦#% = ! cos(ğœ“)
sin(ğœ“)
âˆ’sin(ğœ“)
cos(ğœ“)% â‹…1ğ‘¥
ğ‘¦2 
 
ğ‘’/'0 = 
cos(ğœ“)) â‹…ğ‘¥(ğ‘¡)) + sin(ğœ“)) â‹…ğ‘¦(ğ‘¡)) 
âˆ’(cos (ğœ“)) â‹…ğ‘¥) âˆ’sin(ğœ“)) â‹…ğ‘¦)) 
 
ğ‘’*+, = 
âˆ’sin(Ïˆ-) â‹…ğ‘¥(ğ‘¡)) + cos(ğœ“)) â‹…ğ‘¦(ğ‘¡)) 
âˆ’(âˆ’sin(ğœ“)) â‹…ğ‘¥) + cos(ğœ“)) â‹…ğ‘¦)). 
(12) 
 
The resulting cost functions are 
1
2 R ğ‘’*./,)
1
)
= 1
2 R Scos(ğœ“)) â‹…R ğ‘¤2,3 â‹…ğ‘“2,3(ğ‘¡))
2
+ sin(ğœ“)) â‹…R ğ‘¤2,4 â‹…ğ‘“2,4(ğ‘¡))
2
)
âˆ’(cos(ğœ“)) â‹…ğ‘¥) + sin(ğœ“)) â‹…ğ‘¦)) V 
1
2 R ğ‘’*+,,)
1
)
= 1
2 R Sâˆ’sin(ğœ“)) â‹…R ğ‘¤2,3 â‹…ğ‘“2,3(ğ‘¡))
2
+ cos(ğœ“)) â‹…R ğ‘¤2,4 â‹…ğ‘“2,4(ğ‘¡))
2
)
âˆ’(âˆ’sin (ğœ“)) â‹…ğ‘¥) âˆ’cos(ğœ“)) â‹…ğ‘¦)) V. 
(13) 
Doing the same procedure as above the resulting matrices Qj 
and bj are 
 
Longitudinal: 
 
ğ‘) =
â
âœâœâœ
â›
cos(ğœ“)) â‹…ğ‘“#,2
â‹®
cos(ğœ“)) â‹…ğ‘“0,2
sin(ğœ“)) â‹…ğ‘“#,3
â‹®
sin(ğœ“)) â‹…ğ‘“0,3â 
âŸâŸâŸ
â
     
 
 
 
(14) 
ğ‘„) = ğ‘) â‹…ğ‘) â‹…ğ‘)
4 
 
ğ‘) = ğ‘) â‹…(cos(ğœ“)) â‹…ğ‘¥) + sin(ğœ“)) â‹…ğ‘¦))
â‹…ğ‘) 
 
ğ‘„) = ğ‘) â‹…ğ‘) â‹…ğ‘)
4 
 
ğ‘) = ğ‘) â‹…(âˆ’sin(ğœ“)) â‹…ğ‘¥) + cos(ğœ“)) â‹…ğ‘¦))
â‹…ğ‘) 
 
 
 
 
